(this.webpackJsonpfairdice=this.webpackJsonpfairdice||[]).push([[0],{279:function(e,a,t){e.exports=t(423)},284:function(e,a,t){},285:function(e,a,t){},423:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(18),o=t.n(c),s=(t(284),t(21)),r=t(221),i=t(222),d=t(236),m=(t(285),t(467)),u=t(436),f=t(468),p=t(469),E=t(470),h=t(471),b=t(480),g=t(472),N=t(481),v=t(475),k=t(476),w=t(484),y=t(486),O=t(478),j=t(473),C=t(477),T=t(10),R=(t(286),t(223)),S=Object(T.a)((function(e){return{root:{margin:0,padding:e.spacing(2)}}}))((function(e){var a=e.children,t=e.classes,n=(e.onClose,Object(d.a)(e,["children","classes","onClose"]));return l.a.createElement(m.a,Object.assign({disableTypography:!0,className:t.root},n),l.a.createElement(u.a,{variant:"h6"},a))})),x=Object(T.a)((function(e){return{root:{padding:e.spacing(2)}}}))(f.a),D=Object(T.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(p.a);function L(e){var a=[];return a[0]="die-list ",a[1]="die-list ",e.rollTrigger?(a[0]+="even-roll",a[1]+="odd-roll"):(a[0]+="odd-roll",a[1]+="even-roll"),l.a.createElement("div",{className:"dice"},l.a.createElement("ol",{className:a[0],"data-roll":e.diceRolls[0],id:"die-1"},l.a.createElement("li",{className:"die-item","data-side":"1"},l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"2"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"3"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"4"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"5"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"6"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}))),l.a.createElement("ol",{className:a[1],"data-roll":e.diceRolls[1],id:"die-2"},l.a.createElement("li",{className:"die-item","data-side":"1"},l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"2"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"3"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"4"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"5"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"})),l.a.createElement("li",{className:"die-item","data-side":"6"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}))))}var P=new(function(){function e(a,t){Object(r.a)(this,e),this.probOfRandRoll=a,this.numDecks=t,this.reset()}return Object(i.a)(e,[{key:"setConfig",value:function(e,a){var t=!1;e===this.probOfRandRoll&&a===this.numDecks||(t=!0),this.probOfRandRoll=e,this.numDecks=a,t&&this.reset()}},{key:"reset",value:function(){this.buildDeck(),this.shuffleDeck()}},{key:"buildDeck",value:function(){this.deck=[];for(var e=1;e<=this.numDecks;e++)for(var a=1;a<=6;a++)for(var t=1;t<=6;t++)this.deck.push([a,t])}},{key:"shuffleDeck",value:function(){for(var e=this.deck.length-1;e>0;e--){var a=Math.floor(Math.random()*(e+1)),t=[this.deck[a],this.deck[e]];this.deck[e]=t[0],this.deck[a]=t[1]}}},{key:"randomRoll",value:function(){return[Math.floor(6*Math.random())+1,Math.floor(6*Math.random())+1]}},{key:"roll",value:function(){if(Math.random()>=this.probOfRandRoll/100){console.log("returning a card draw");var e=this.deck.pop();return 0===this.deck.length&&this.reset(),e}return console.log("returning a pure random roll"),this.randomRoll()}}]),e}())(25,1);function A(e,a){var t=l.a.useState((function(){var t=window.localStorage.getItem(a);return null!==t?JSON.parse(t):e})),n=Object(s.a)(t,2),c=n[0],o=n[1];return l.a.useEffect((function(){window.localStorage.setItem(a,JSON.stringify(c))}),[a,c]),[c,o]}var M=function(){var e=Object(n.useState)(!1),a=Object(s.a)(e,2),t=a[0],c=a[1],o=Object(n.useState)(!1),r=Object(s.a)(o,2),i=r[0],d=r[1],m=Object(n.useState)(!1),f=Object(s.a)(m,2),p=f[0],T=f[1],M=Object(n.useState)(!0),W=Object(s.a)(M,2),F=W[0],I=W[1],J=A(25,"probOfRandRoll"),B=Object(s.a)(J,2),G=B[0],H=B[1],U=A(1,"numberOfDecks"),_=Object(s.a)(U,2),z=_[0],K=_[1],$=Object(n.useState)([6,6]),q=Object(s.a)($,2),Q=q[0],V=q[1],X=Object(n.useState)(!0),Y=Object(s.a)(X,2),Z=Y[0],ee=Y[1],ae=[{diceTotal:"2",count:0},{diceTotal:"3",count:0},{diceTotal:"4",count:0},{diceTotal:"5",count:0},{diceTotal:"6",count:0},{diceTotal:"7",count:0},{diceTotal:"8",count:0},{diceTotal:"9",count:0},{diceTotal:"10",count:0},{diceTotal:"11",count:0},{diceTotal:"12",count:0}],te=Object(n.useState)(ae),ne=Object(s.a)(te,2),le=ne[0],ce=ne[1],oe=function(){P.setConfig(G,z),c(!1)},se=function(){d(!1)},re=function(){T(!1)};return l.a.createElement("div",{className:"App"},l.a.createElement(E.a,{position:"sticky"},l.a.createElement(h.a,{display:"flex"},l.a.createElement(b.a,{flexGrow:1},l.a.createElement("img",{src:"./transparent-logolinear.png",height:"36px",alt:"Fairer Dice",align:"left"})),l.a.createElement(g.a,{color:"inherit",onClick:function(){return c(!0)}},l.a.createElement(j.a,null)))),l.a.createElement(N.a,{open:t,onClose:oe},l.a.createElement(S,{onClose:oe},"Config Options"),l.a.createElement(x,null,l.a.createElement(v.a,{direction:"row",container:"true",alignItems:"center",justify:"space-between"},l.a.createElement(v.a,{item:"true"},l.a.createElement(u.a,null,"% probability of random roll")),l.a.createElement(v.a,{item:"true"},l.a.createElement(k.a,{onClickAway:se},l.a.createElement(w.a,{PopperProps:{disablePortal:!0},disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,placement:"left",onClose:se,open:i,title:"On each roll an initial random event is used to determine whether to draw from the shuffled list of dice rolls (the deck) or a purely random dice roll."},l.a.createElement(g.a,null,l.a.createElement(C.a,{onClick:function(){d(!0)}})))))),l.a.createElement(y.a,{style:{width:"97%"},value:G,min:0,max:100,step:1,valueLabelDisplay:"auto",valueLabelFormat:function(e){return e+"%"},onChange:function(e,a){return H(a)}}),l.a.createElement(v.a,{direction:"row",container:"true",alignItems:"center",justify:"space-between"},l.a.createElement(v.a,{item:"true"},l.a.createElement(u.a,null,"Number of 36 roll card decks")),l.a.createElement(v.a,{item:"true"},l.a.createElement(k.a,{onClickAway:re},l.a.createElement(w.a,{PopperProps:{disablePortal:!0},disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,placement:"left",onClose:re,open:p,title:"All 36 possible die combination are placed in a list like a deck of cards.  The deck is shuffled and cards are drawn to determine the roll.  One to three 36-card decks can be used"},l.a.createElement(g.a,null,l.a.createElement(C.a,{onClick:function(){T(!0)}})))))),l.a.createElement(y.a,{style:{width:"97%"},value:z,min:1,max:3,step:1,marks:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"}],onChange:function(e,a){return K(a)}})),l.a.createElement(D,null,l.a.createElement(O.a,{autoFocus:!0,onClick:oe},"OK"))),l.a.createElement(b.a,{onClick:function(){var e=P.roll();V(e),ee(!Z);var a=e[0]+e[1]-2,t=le;t[a].count=t[a].count+1,ce(t)}},l.a.createElement(b.a,null,l.a.createElement(L,{diceRolls:Q,rollTrigger:Z})),l.a.createElement(b.a,null,l.a.createElement(u.a,{variant:"h1"},Q[0]+Q[1]))),l.a.createElement(b.a,{height:"250px"},l.a.createElement(b.a,{display:"flex",justifyContent:"flex-end",style:{width:"100%"}},l.a.createElement(O.a,{onClick:function(){I(!F)}},F?"Hide Graph":"Show Graph")),l.a.createElement(b.a,{display:F?"flex":"none",height:"100%"},l.a.createElement(R.a,{keys:["count"],data:le,indexBy:"diceTotal",margin:{top:50,right:50,bottom:50,left:50},padding:.3,colors:{scheme:"red_yellow_blue"},axisLeft:{tickSize:0,tickPadding:5,tickRotation:0,legend:"roll count",legendPosition:"middle",legendOffset:-35},labelTextColor:"white",animate:!0,moitionStiffness:90,motionDamping:15}))),l.a.createElement(b.a,{position:"fixed",display:"flex",justifyContent:"flex-end",style:{width:"100%",bottom:"5px"}},l.a.createElement(O.a,{color:"secondary",onClick:function(){ce(ae),P.reset()}},"Reset")))},W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(M,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/fairerdice",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/fairerdice","/service-worker.js");W?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):F(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):F(a,e)}))}}()}},[[279,1,2]]]);
//# sourceMappingURL=main.0e548fe1.chunk.js.map